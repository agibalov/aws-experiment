<!doctype html>
<html>
    <head>
        <title>Swagger</title>
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Source+Code+Pro:300,600|Titillium+Web:400,600,700" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.3.1/swagger-ui.css">
    </head>
    <body>
        <div id="swagger-ui"></div>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.5/angular.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.3.1/swagger-ui-bundle.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/3.3.1/swagger-ui-standalone-preset.js"></script>
        <script>
            angular.injector(['ng']).invoke(['$http', function($http) {
                $http.get('/config.json').then(function(response) {
                    var apiUrl = response.data['apiUrl'];

                    const ui = SwaggerUIBundle({
                        url: apiUrl + "/v2/api-docs",
                        dom_id: "#swagger-ui",
                        deepLinking: true,
                        presets: [
                            SwaggerUIBundle.presets.apis,
                            SwaggerUIStandalonePreset
                        ],
                        plugins: [
                            SwaggerUIBundle.plugins.DownloadUrl
                        ],
                        layout: "StandaloneLayout"
                    });
                    window.ui = ui;
                }, function(response) {
                    console.log('Failed to get /config.json');
                });
            }]);
        </script>
    </body>
</html>
